#!/usr/bin/env ansible-playbook
---
- name: Set password for user
  hosts: all
  gather_facts: false
  remote_user: pi
  become: true
  become_method: sudo
  become_user: root

# Hash generated by: $ ansible all -i localhost, -m debug -a "msg={{ 'PASSWORD' | password_hash('sha512', 'HASH') }}"
  tasks:
  - name: Change Password
    user: name=pi password="{{ 'PASSWORD' | password_hash('sha512') }}" update_password=always
